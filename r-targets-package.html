<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>B.1 R targets package | Air-Health SWS R targets (Last edited on 2025-07-03)</title>
  <meta name="description" content="B.1 R targets package | Air-Health SWS R targets (Last edited on 2025-07-03)" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="B.1 R targets package | Air-Health SWS R targets (Last edited on 2025-07-03)" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="B.1 R targets package | Air-Health SWS R targets (Last edited on 2025-07-03)" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="code-overview.html"/>
<link rel="next" href="directory-and-file-structure.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="health-impact-function.html"><a href="health-impact-function.html"><i class="fa fa-check"></i><b>2</b> Health impact function</a>
<ul>
<li class="chapter" data-level="2.1" data-path="epidemiological-study-designs-source-sample-and-study-populations.html"><a href="epidemiological-study-designs-source-sample-and-study-populations.html"><i class="fa fa-check"></i><b>2.1</b> Epidemiological study designs: source, sample and study populations</a></li>
<li class="chapter" data-level="2.2" data-path="case-definition.html"><a href="case-definition.html"><i class="fa fa-check"></i><b>2.2</b> Case definition</a></li>
<li class="chapter" data-level="2.3" data-path="relative-risk-odds-ratio-and-hazard-ratio.html"><a href="relative-risk-odds-ratio-and-hazard-ratio.html"><i class="fa fa-check"></i><b>2.3</b> Relative risk, odds ratio and hazard ratio</a></li>
<li class="chapter" data-level="2.4" data-path="the-paf-population-attributable-fraction.html"><a href="the-paf-population-attributable-fraction.html"><i class="fa fa-check"></i><b>2.4</b> The PAF (population attributable fraction)</a></li>
<li class="chapter" data-level="2.5" data-path="tmrel.html"><a href="tmrel.html"><i class="fa fa-check"></i><b>2.5</b> TMREL</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="study-population-and-health-outcomes.html"><a href="study-population-and-health-outcomes.html"><i class="fa fa-check"></i><b>3</b> Study population and health outcomes</a>
<ul>
<li class="chapter" data-level="3.1" data-path="source-sample-and-study-population.html"><a href="source-sample-and-study-population.html"><i class="fa fa-check"></i><b>3.1</b> Source, sample and study population</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exposure-assessment.html"><a href="exposure-assessment.html"><i class="fa fa-check"></i><b>4</b> Exposure assessment</a>
<ul>
<li class="chapter" data-level="4.1" data-path="spatial-modelling-and-dealing-with-coverage-issues-or-missingness.html"><a href="spatial-modelling-and-dealing-with-coverage-issues-or-missingness.html"><i class="fa fa-check"></i><b>4.1</b> Spatial modelling and dealing with coverage issues or missingness</a></li>
<li class="chapter" data-level="4.2" data-path="counterfactual.html"><a href="counterfactual.html"><i class="fa fa-check"></i><b>4.2</b> Counterfactual</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="link-population-health-and-environment-data.html"><a href="link-population-health-and-environment-data.html"><i class="fa fa-check"></i><b>5</b> Link population, health and environment data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="spatial-and-temporal-issues.html"><a href="spatial-and-temporal-issues.html"><i class="fa fa-check"></i><b>5.1</b> Spatial and temporal issues</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="attributable-number.html"><a href="attributable-number.html"><i class="fa fa-check"></i><b>6</b> Attributable number</a>
<ul>
<li class="chapter" data-level="6.1" data-path="life-tables.html"><a href="life-tables.html"><i class="fa fa-check"></i><b>6.1</b> Life tables</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>A</b> Getting started</a></li>
<li class="chapter" data-level="B" data-path="code-overview.html"><a href="code-overview.html"><i class="fa fa-check"></i><b>B</b> Code overview</a>
<ul>
<li class="chapter" data-level="B.1" data-path="r-targets-package.html"><a href="r-targets-package.html"><i class="fa fa-check"></i><b>B.1</b> R targets package</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="r-targets-package.html"><a href="r-targets-package.html#function-oriented-programming"><i class="fa fa-check"></i><b>B.1.1</b> Function-oriented programming</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="directory-and-file-structure.html"><a href="directory-and-file-structure.html"><i class="fa fa-check"></i><b>B.2</b> Directory and File Structure</a></li>
<li class="chapter" data-level="B.3" data-path="targets.r-script.html"><a href="targets.r-script.html"><i class="fa fa-check"></i><b>B.3</b> _targets.R script</a>
<ul>
<li class="chapter" data-level="B.3.1" data-path="targets.r-script.html"><a href="targets.r-script.html#input-targets"><i class="fa fa-check"></i><b>B.3.1</b> input targets</a></li>
<li class="chapter" data-level="B.3.2" data-path="targets.r-script.html"><a href="targets.r-script.html#data-targets"><i class="fa fa-check"></i><b>B.3.2</b> data targets</a></li>
<li class="chapter" data-level="B.3.3" data-path="targets.r-script.html"><a href="targets.r-script.html#analysis-targets"><i class="fa fa-check"></i><b>B.3.3</b> analysis targets</a></li>
<li class="chapter" data-level="B.3.4" data-path="targets.r-script.html"><a href="targets.r-script.html#viz-targets"><i class="fa fa-check"></i><b>B.3.4</b> viz targets</a></li>
<li class="chapter" data-level="B.3.5" data-path="targets.r-script.html"><a href="targets.r-script.html#pipeline-list"><i class="fa fa-check"></i><b>B.3.5</b> Pipeline list</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="metaprogramming.html"><a href="metaprogramming.html"><i class="fa fa-check"></i><b>B.4</b> Metaprogramming</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="case-study---who-guidelines.html"><a href="case-study---who-guidelines.html"><i class="fa fa-check"></i><b>C</b> Case Study - WHO guidelines</a></li>
<li class="chapter" data-level="D" data-path="case-study---alternate-pm2.5-surfaces.html"><a href="case-study---alternate-pm2.5-surfaces.html"><i class="fa fa-check"></i><b>D</b> Case Study - Alternate PM<sub>2.5</sub> surfaces</a></li>
<li class="chapter" data-level="E" data-path="case-study---alternate-pollutant.html"><a href="case-study---alternate-pollutant.html"><i class="fa fa-check"></i><b>E</b> Case Study - Alternate Pollutant</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Air-Health SWS R targets (Last edited on 2025-07-03)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-targets-package" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">B.1</span> R targets package<a href="r-targets-package.html#r-targets-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <a href="https://github.com/ropensci/targets">R targets package</a>, a set of pipeline implementation and management tools, forms the basis of the Air health Scientific Workflow System. Using targets aids the reproducibility of analyses, tracking input data, parameters, code and dependencies to determine which steps need to be rerun when a change is detected.</p>
<p>A targets pipeline is structured as a list of targets, each of which has a name and associated code block. The result of each target is saved and can be used in other targets by referring to it by name.</p>
<p>On running the pipeline, each target is checked for changes to format, metadata and data, and is rerun if a change is detected. If there has been no change, the target is skipped (code is not run). Note that if a target changes, all dependent downstream targets will be run as the dependencies are recorded in target metadata.</p>
<p>More complex pipelines can be set up with targets branching functionality and <a href="https://github.com/ropensci/tarchetypes">tarchetypes package</a>. See the <a href="https://books.ropensci.org/targets/">targets manual</a> and <a href="https://docs.ropensci.org/targets/">documentation</a> for further information.</p>
<div id="function-oriented-programming" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">B.1.1</span> Function-oriented programming<a href="r-targets-package.html#function-oriented-programming" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Targets is designed to be function-oriented, writing and calling functions. This is in contrast to the style of programming that runs step-by-step, top to bottom.</p>
<p>An example of the latter:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r-targets-package.html#cb1-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb1-2"><a href="r-targets-package.html#cb1-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb1-3"><a href="r-targets-package.html#cb1-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> x<span class="sc">*</span>y</span></code></pre></div>
<p>In targets:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="r-targets-package.html#cb2-1" tabindex="-1"></a>do_multiply <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b){</span>
<span id="cb2-2"><a href="r-targets-package.html#cb2-2" tabindex="-1"></a>  a<span class="sc">*</span>b</span>
<span id="cb2-3"><a href="r-targets-package.html#cb2-3" tabindex="-1"></a>}</span>
<span id="cb2-4"><a href="r-targets-package.html#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="r-targets-package.html#cb2-5" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb2-6"><a href="r-targets-package.html#cb2-6" tabindex="-1"></a>  <span class="fu">tar_target</span>(x, <span class="dv">2</span>),</span>
<span id="cb2-7"><a href="r-targets-package.html#cb2-7" tabindex="-1"></a>  <span class="fu">tar_target</span>(y, <span class="dv">3</span>),</span>
<span id="cb2-8"><a href="r-targets-package.html#cb2-8" tabindex="-1"></a>  <span class="fu">tar_target</span>(z, <span class="fu">do_multiply</span>(x, y))</span>
<span id="cb2-9"><a href="r-targets-package.html#cb2-9" tabindex="-1"></a>)</span></code></pre></div>
<p>While for this example, there seems to be little benefit from creating a function (indeed one could simply write <code>tar_target(z, x*y)</code>), it aids code clarity and efficiency for more complex workflows. Clearly named functions can self-describe their intended purpose, with defined inputs (arguments) and output(s) (return value). Carefully defined generalised functions may be reused as needed within or across projects.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="code-overview.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="directory-and-file-structure.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
